"use strict";

/**
 * json格式转树状结构
 * @param   {json}      json数据
 * @param   {String}    id的字符串
 * @param   {String}    父id的字符串
 * @param   {String}    children的字符串
 * @return  {Array}     数组
 */
function transData(a, idStr, pidStr, chindrenStr) {
    var r = [],
        hash = {},
        id = idStr,
        pid = pidStr,
        children = chindrenStr,
        i = 0,
        j = 0,
        len = a.length;
    for (; i < len; i++) {
        hash[a[i][id]] = a[i];
    }
    for (; j < len; j++) {
        var aVal = a[j],
            hashVP = hash[aVal[pid]];
        if (hashVP) {
            !hashVP[children] && (hashVP[children] = []);
            hashVP[children].push(aVal);
        } else {
            r.push(aVal);
        }
    }
    return r;
}

var jsonData = [{ "id": "4", "pid": "1", "name": "大家电" }, { "id": "5", "pid": "1", "name": "生活电器" }, { "id": "1", "pid": "0", "name": "家用电器" }, { "id": "2", "pid": "0", "name": "服饰" }, { "id": "3", "pid": "0", "name": "化妆" }, { "id": "7", "pid": "4", "name": "空调" }, { "id": "8", "pid": "4", "name": "冰箱" }, { "id": "9", "pid": "4", "name": "洗衣机" }, { "id": "10", "pid": "4", "name": "热水器" }, { "id": "11", "pid": "3", "name": "面部护理" }, { "id": "12", "pid": "3", "name": "口腔护理" }, { "id": "13", "pid": "2", "name": "男装" }, { "id": "14", "pid": "2", "name": "女装" }, { "id": "15", "pid": "7", "name": "海尔空调" }, { "id": "16", "pid": "7", "name": "美的空调" }, { "id": "19", "pid": "5", "name": "加湿器" }, { "id": "20", "pid": "5", "name": "电熨斗" }];

var jsonDataTree = transData(jsonData, 'id', 'pid', 'chindren');
console.log(jsonDataTree);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbInRyYW5zRGF0YSIsImEiLCJpZFN0ciIsInBpZFN0ciIsImNoaW5kcmVuU3RyIiwiciIsImhhc2giLCJpZCIsInBpZCIsImNoaWxkcmVuIiwiaSIsImoiLCJsZW4iLCJsZW5ndGgiLCJhVmFsIiwiaGFzaFZQIiwicHVzaCIsImpzb25EYXRhIiwianNvbkRhdGFUcmVlIiwiY29uc29sZSIsImxvZyJdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7Ozs7Ozs7QUFRQSxTQUFTQSxTQUFULENBQW1CQyxDQUFuQixFQUFzQkMsS0FBdEIsRUFBNkJDLE1BQTdCLEVBQXFDQyxXQUFyQyxFQUFpRDtBQUM3QyxRQUFJQyxJQUFJLEVBQVI7QUFBQSxRQUFZQyxPQUFPLEVBQW5CO0FBQUEsUUFBdUJDLEtBQUtMLEtBQTVCO0FBQUEsUUFBbUNNLE1BQU1MLE1BQXpDO0FBQUEsUUFBaURNLFdBQVdMLFdBQTVEO0FBQUEsUUFBeUVNLElBQUksQ0FBN0U7QUFBQSxRQUFnRkMsSUFBSSxDQUFwRjtBQUFBLFFBQXVGQyxNQUFNWCxFQUFFWSxNQUEvRjtBQUNBLFdBQU1ILElBQUlFLEdBQVYsRUFBZUYsR0FBZixFQUFtQjtBQUNmSixhQUFLTCxFQUFFUyxDQUFGLEVBQUtILEVBQUwsQ0FBTCxJQUFpQk4sRUFBRVMsQ0FBRixDQUFqQjtBQUNIO0FBQ0QsV0FBTUMsSUFBSUMsR0FBVixFQUFlRCxHQUFmLEVBQW1CO0FBQ2YsWUFBSUcsT0FBT2IsRUFBRVUsQ0FBRixDQUFYO0FBQUEsWUFBaUJJLFNBQVNULEtBQUtRLEtBQUtOLEdBQUwsQ0FBTCxDQUExQjtBQUNBLFlBQUdPLE1BQUgsRUFBVTtBQUNOLGFBQUNBLE9BQU9OLFFBQVAsQ0FBRCxLQUFzQk0sT0FBT04sUUFBUCxJQUFtQixFQUF6QztBQUNBTSxtQkFBT04sUUFBUCxFQUFpQk8sSUFBakIsQ0FBc0JGLElBQXRCO0FBQ0gsU0FIRCxNQUdLO0FBQ0RULGNBQUVXLElBQUYsQ0FBT0YsSUFBUDtBQUNIO0FBQ0o7QUFDRCxXQUFPVCxDQUFQO0FBQ0g7O0FBRUQsSUFBSVksV0FBVyxDQUNmLEVBQUMsTUFBSyxHQUFOLEVBQVUsT0FBTSxHQUFoQixFQUFvQixRQUFPLEtBQTNCLEVBRGUsRUFFZixFQUFDLE1BQUssR0FBTixFQUFVLE9BQU0sR0FBaEIsRUFBb0IsUUFBTyxNQUEzQixFQUZlLEVBR2YsRUFBQyxNQUFLLEdBQU4sRUFBVSxPQUFNLEdBQWhCLEVBQW9CLFFBQU8sTUFBM0IsRUFIZSxFQUlmLEVBQUMsTUFBSyxHQUFOLEVBQVUsT0FBTSxHQUFoQixFQUFvQixRQUFPLElBQTNCLEVBSmUsRUFLZixFQUFDLE1BQUssR0FBTixFQUFVLE9BQU0sR0FBaEIsRUFBb0IsUUFBTyxJQUEzQixFQUxlLEVBTWYsRUFBQyxNQUFLLEdBQU4sRUFBVSxPQUFNLEdBQWhCLEVBQW9CLFFBQU8sSUFBM0IsRUFOZSxFQU9mLEVBQUMsTUFBSyxHQUFOLEVBQVUsT0FBTSxHQUFoQixFQUFvQixRQUFPLElBQTNCLEVBUGUsRUFRZixFQUFDLE1BQUssR0FBTixFQUFVLE9BQU0sR0FBaEIsRUFBb0IsUUFBTyxLQUEzQixFQVJlLEVBU2YsRUFBQyxNQUFLLElBQU4sRUFBVyxPQUFNLEdBQWpCLEVBQXFCLFFBQU8sS0FBNUIsRUFUZSxFQVVmLEVBQUMsTUFBSyxJQUFOLEVBQVcsT0FBTSxHQUFqQixFQUFxQixRQUFPLE1BQTVCLEVBVmUsRUFXZixFQUFDLE1BQUssSUFBTixFQUFXLE9BQU0sR0FBakIsRUFBcUIsUUFBTyxNQUE1QixFQVhlLEVBWWYsRUFBQyxNQUFLLElBQU4sRUFBVyxPQUFNLEdBQWpCLEVBQXFCLFFBQU8sSUFBNUIsRUFaZSxFQWFmLEVBQUMsTUFBSyxJQUFOLEVBQVcsT0FBTSxHQUFqQixFQUFxQixRQUFPLElBQTVCLEVBYmUsRUFjZixFQUFDLE1BQUssSUFBTixFQUFXLE9BQU0sR0FBakIsRUFBcUIsUUFBTyxNQUE1QixFQWRlLEVBZWYsRUFBQyxNQUFLLElBQU4sRUFBVyxPQUFNLEdBQWpCLEVBQXFCLFFBQU8sTUFBNUIsRUFmZSxFQWdCZixFQUFDLE1BQUssSUFBTixFQUFXLE9BQU0sR0FBakIsRUFBcUIsUUFBTyxLQUE1QixFQWhCZSxFQWlCZixFQUFDLE1BQUssSUFBTixFQUFXLE9BQU0sR0FBakIsRUFBcUIsUUFBTyxLQUE1QixFQWpCZSxDQUFmOztBQW9CQSxJQUFJQyxlQUFlbEIsVUFBVWlCLFFBQVYsRUFBb0IsSUFBcEIsRUFBMEIsS0FBMUIsRUFBaUMsVUFBakMsQ0FBbkI7QUFDQUUsUUFBUUMsR0FBUixDQUFZRixZQUFaIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIGpzb27moLzlvI/ovazmoJHnirbnu5PmnoRcclxuICogQHBhcmFtICAge2pzb259ICAgICAganNvbuaVsOaNrlxyXG4gKiBAcGFyYW0gICB7U3RyaW5nfSAgICBpZOeahOWtl+espuS4slxyXG4gKiBAcGFyYW0gICB7U3RyaW5nfSAgICDniLZpZOeahOWtl+espuS4slxyXG4gKiBAcGFyYW0gICB7U3RyaW5nfSAgICBjaGlsZHJlbueahOWtl+espuS4slxyXG4gKiBAcmV0dXJuICB7QXJyYXl9ICAgICDmlbDnu4RcclxuICovXHJcbmZ1bmN0aW9uIHRyYW5zRGF0YShhLCBpZFN0ciwgcGlkU3RyLCBjaGluZHJlblN0cil7XHJcbiAgICB2YXIgciA9IFtdLCBoYXNoID0ge30sIGlkID0gaWRTdHIsIHBpZCA9IHBpZFN0ciwgY2hpbGRyZW4gPSBjaGluZHJlblN0ciwgaSA9IDAsIGogPSAwLCBsZW4gPSBhLmxlbmd0aDtcclxuICAgIGZvcig7IGkgPCBsZW47IGkrKyl7XHJcbiAgICAgICAgaGFzaFthW2ldW2lkXV0gPSBhW2ldO1xyXG4gICAgfVxyXG4gICAgZm9yKDsgaiA8IGxlbjsgaisrKXtcclxuICAgICAgICB2YXIgYVZhbCA9IGFbal0sIGhhc2hWUCA9IGhhc2hbYVZhbFtwaWRdXTtcclxuICAgICAgICBpZihoYXNoVlApe1xyXG4gICAgICAgICAgICAhaGFzaFZQW2NoaWxkcmVuXSAmJiAoaGFzaFZQW2NoaWxkcmVuXSA9IFtdKTtcclxuICAgICAgICAgICAgaGFzaFZQW2NoaWxkcmVuXS5wdXNoKGFWYWwpO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICByLnB1c2goYVZhbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHI7XHJcbn1cclxuXHJcbnZhciBqc29uRGF0YSA9IFtcclxue1wiaWRcIjpcIjRcIixcInBpZFwiOlwiMVwiLFwibmFtZVwiOlwi5aSn5a6255S1XCJ9LFxyXG57XCJpZFwiOlwiNVwiLFwicGlkXCI6XCIxXCIsXCJuYW1lXCI6XCLnlJ/mtLvnlLXlmahcIn0sXHJcbntcImlkXCI6XCIxXCIsXCJwaWRcIjpcIjBcIixcIm5hbWVcIjpcIuWutueUqOeUteWZqFwifSxcclxue1wiaWRcIjpcIjJcIixcInBpZFwiOlwiMFwiLFwibmFtZVwiOlwi5pyN6aWwXCJ9LFxyXG57XCJpZFwiOlwiM1wiLFwicGlkXCI6XCIwXCIsXCJuYW1lXCI6XCLljJblpoZcIn0sXHJcbntcImlkXCI6XCI3XCIsXCJwaWRcIjpcIjRcIixcIm5hbWVcIjpcIuepuuiwg1wifSxcclxue1wiaWRcIjpcIjhcIixcInBpZFwiOlwiNFwiLFwibmFtZVwiOlwi5Yaw566xXCJ9LFxyXG57XCJpZFwiOlwiOVwiLFwicGlkXCI6XCI0XCIsXCJuYW1lXCI6XCLmtJfooaPmnLpcIn0sXHJcbntcImlkXCI6XCIxMFwiLFwicGlkXCI6XCI0XCIsXCJuYW1lXCI6XCLng63msLTlmahcIn0sXHJcbntcImlkXCI6XCIxMVwiLFwicGlkXCI6XCIzXCIsXCJuYW1lXCI6XCLpnaLpg6jmiqTnkIZcIn0sXHJcbntcImlkXCI6XCIxMlwiLFwicGlkXCI6XCIzXCIsXCJuYW1lXCI6XCLlj6PohZTmiqTnkIZcIn0sXHJcbntcImlkXCI6XCIxM1wiLFwicGlkXCI6XCIyXCIsXCJuYW1lXCI6XCLnlLfoo4VcIn0sXHJcbntcImlkXCI6XCIxNFwiLFwicGlkXCI6XCIyXCIsXCJuYW1lXCI6XCLlpbPoo4VcIn0sXHJcbntcImlkXCI6XCIxNVwiLFwicGlkXCI6XCI3XCIsXCJuYW1lXCI6XCLmtbflsJTnqbrosINcIn0sXHJcbntcImlkXCI6XCIxNlwiLFwicGlkXCI6XCI3XCIsXCJuYW1lXCI6XCLnvo7nmoTnqbrosINcIn0sXHJcbntcImlkXCI6XCIxOVwiLFwicGlkXCI6XCI1XCIsXCJuYW1lXCI6XCLliqDmub/lmahcIn0sXHJcbntcImlkXCI6XCIyMFwiLFwicGlkXCI6XCI1XCIsXCJuYW1lXCI6XCLnlLXnhqjmlpdcIn1cclxuXTtcclxuXHJcbnZhciBqc29uRGF0YVRyZWUgPSB0cmFuc0RhdGEoanNvbkRhdGEsICdpZCcsICdwaWQnLCAnY2hpbmRyZW4nKTtcclxuY29uc29sZS5sb2coanNvbkRhdGFUcmVlKTsgICAgIl19
