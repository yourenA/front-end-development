"use strict";function treeMenu(e){this.tree=e||[],this.groups={}}function listParents(e,n){function t(e,n){return console.log(n),void 0===n.pId?[n]:t(e,e[n.pId].node).concat([n])}return n.pId?t(e,e[n.pId].node):[]}function listFirstChildren(e,n){function t(e,n){return e[n.id].children.length<=0?[n]:[n].concat(t(e,e[n.id].children[0]))}return e[n.id].children.length<=0?[]:t(e,e[n.id].children[0])}for(var zNodes=[{id:1,name:"A"},{id:2,name:"B"},{id:3,name:"C"},{id:31,pId:3,name:"C1"},{id:36,pId:31,name:"z"},{id:37,pId:36,name:"z1123"},{id:38,pId:37,name:"z123123123"}],i=0,len=zNodes.length;i<len;i++)void 0===zNodes[i].pId&&console.log("不存在pid");console.log(zNodes),treeMenu.prototype={init:function(e){return this.group(),this.getDom(this.groups[e])},group:function(){for(var e=0;e<this.tree.length;e++)this.groups[this.tree[e].pId]?this.groups[this.tree[e].pId].push(this.tree[e]):(this.groups[this.tree[e].pId]=[],this.groups[this.tree[e].pId].push(this.tree[e]))},getDom:function(e){if(!e)return"";for(var n="\n<ul >\n",t=0;t<e.length;t++)n+='<li><a href="'+e[t].id+'">'+e[t].name+"</a>",n+=this.getDom(this.groups[e[t].id]),n+="</li>\n";return n+="</ul>\n"}};var html=new treeMenu(zNodes).init(0),tree=zNodes.reduce(function(e,n){var t=n.id,i=n.pId;return e[t]=e[t]||{children:[]},e[t].node=n,i&&(e[i]=e[i]||{children:[]},e[i].children.push(n)),console.log("o",e),e},{}),node={id:38,pId:37,name:"z123123123"};console.log(listParents(tree,node).map(function(e){return e.name}).concat(node.name).join(" -> ")),console.log(listFirstChildren(tree,node).map(function(e){return e.name}).join(" -> "));